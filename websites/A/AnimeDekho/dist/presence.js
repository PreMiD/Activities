"use strict";(()=>{function g(e,r){let c=Date.now()/1e3-e,l=c+r;return[Math.floor(c),Math.floor(l)]}var s=new Presence({clientId:"1377295092578123926"}),T=Math.floor(Date.now()/1e3),t=null,f=document.location.href,w=null,m=(n=>(n.Logo="https://i.pinimg.com/736x/cf/08/4e/cf084e53ab1a153662c5cb96c193a284.jpg",n[n.Search="https://cdn.rcd.gg/PreMiD/resources/search.png"]="Search",n[n.Play="https://cdn.rcd.gg/PreMiD/resources/play.png"]="Play",n[n.Pause="https://cdn.rcd.gg/PreMiD/resources/pause.png"]="Pause",n))(m||{});s.on("iFrameData",e=>{e.currTime&&e.duration&&(t?(t.currTime=e.currTime,t.duration=e.duration,t.paused=e.paused,t.timestamp=Date.now()):t={currTime:e.currTime,duration:e.duration,paused:e.paused,timestamp:Date.now()})});w=setInterval(()=>{let e=document.location.href;e!==f&&(t=null,f=e)},1e3);s.on("UpdateData",async()=>{let e={startTimestamp:T,type:3},{pathname:r,search:c,href:l}=document.location,n=await s.getSetting("buttons"),h=await s.getSetting("timestamps"),b=Date.now();if(t&&b-t.timestamp>3e3&&(t=null),r==="/"&&(e.largeImageKey="https://i.pinimg.com/736x/cf/08/4e/cf084e53ab1a153662c5cb96c193a284.jpg"),r==="/home/")e.details="Browsing Homepage",e.smallImageKey=m.Search;else if(c.startsWith("?s=")){let a=document.querySelector("h1.section-title span")?.textContent;e.details="Searching",e.state=a?`for "${a}"`:"for anime",e.smallImageKey=m.Search}else if(r.startsWith("/category/")){let a=document.querySelector("h1.section-title span")?.textContent;e.details="Browsing Category",e.state=a?`for "${a}"`:"for anime",e.smallImageKey=m.Search}else if(r==="/series/")e.details="Browsing Series Category",e.smallImageKey=m.Search;else if(r==="/movie/")e.details="Browsing Movies Category",e.smallImageKey=m.Search;else if(r.startsWith("/series/")){let a=document.querySelector("h1")?.textContent,o=document.querySelector(".post-thumbnail img")?.getAttribute("src");e.details="Viewing Series",e.state=a||"Unknown Series",o&&(e.largeImageKey=String(o),e.largeImageText=a||"Unknown Series"),n&&(e.buttons=[{label:"View Details",url:l}])}else if(r.startsWith("/movie/")&&r!=="/movie/"){let a=document.querySelector("h1")?.textContent,o=document.querySelector(".post-thumbnail img")?.getAttribute("src");if(e.state="Movie",e.details=a||"Unknown Movie",o&&(e.largeImageKey=String(o),e.largeImageText=a||"Unknown Movie"),t&&h)if(!t.paused&&t.currTime>0&&t.duration>0){let[d,u]=g(Math.floor(t.currTime),Math.floor(t.duration));e.startTimestamp=d,e.endTimestamp=u,e.smallImageKey="https://cdn.rcd.gg/PreMiD/resources/play.png",e.smallImageText="Watching"}else e.smallImageKey="https://cdn.rcd.gg/PreMiD/resources/pause.png",e.smallImageText="Paused",delete e.startTimestamp,delete e.endTimestamp;n&&(e.buttons=[{label:"Watch Movie",url:l}])}else if(r.includes("/epi/")){let o=(document.querySelector(".entry-title")?.textContent||"").replace(/Season\s\d+\sEpisode\s\d+|\d+x\d+$/i,"").trim(),d=document.querySelector(".season-episode")?.textContent||"",u=document.querySelector(".post-thumbnail img")?.getAttribute("src");if(e.details=o||"Unknown Anime",e.state=d||"Unknown Episode",u&&(e.largeImageKey=String(u),e.largeImageText=o||"Unknown Anime"),t&&h)if(!t.paused&&t.currTime>0&&t.duration>0){let[i,p]=g(Math.floor(t.currTime),Math.floor(t.duration));e.startTimestamp=i,e.endTimestamp=p,e.smallImageKey="https://cdn.rcd.gg/PreMiD/resources/play.png",e.smallImageText="Watching"}else e.smallImageKey="https://cdn.rcd.gg/PreMiD/resources/pause.png",e.smallImageText="Paused",delete e.startTimestamp,delete e.endTimestamp;if(n){e.buttons=[{label:"Watch Episode",url:l}];try{let i=r.match(/\/epi\/([^\/]+)/);if(i&&i[1]){let p=i[1].replace(/-\d+x\d+$/,"");e.buttons.push({label:"View Series",url:`${window.location.origin}/series/${p}`})}}catch{}}}!n&&e.buttons&&delete e.buttons,e.details?s.setActivity(e):s.setActivity()});})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vcHJlbWlkL3NyYy9mdW5jdGlvbnMvZ2V0VGltZXN0YW1wcy50cyIsICIuLi9wcmVzZW5jZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBDb252ZXJ0cyBjdXJyZW50IG1lZGlhIHRpbWUgYW5kIGR1cmF0aW9uIGludG8gVW5peCB0aW1lc3RhbXBzXG4gKiBAcGFyYW0ge251bWJlcn0gZWxlbWVudFRpbWUgQ3VycmVudCBwbGF5YmFjayBwb3NpdGlvbiBpbiBzZWNvbmRzXG4gKiBAcGFyYW0ge251bWJlcn0gZWxlbWVudER1cmF0aW9uIFRvdGFsIGR1cmF0aW9uIG9mIHRoZSBtZWRpYSBpbiBzZWNvbmRzXG4gKiBAcmV0dXJucyB7W251bWJlciwgbnVtYmVyXX0gQXJyYXkgY29udGFpbmluZyBbc3RhcnRUaW1lc3RhbXAsIGVuZFRpbWVzdGFtcF0gYXMgVW5peCB0aW1lc3RhbXBzIGluIHNlY29uZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWVzdGFtcHMoXG4gIGVsZW1lbnRUaW1lOiBudW1iZXIsXG4gIGVsZW1lbnREdXJhdGlvbjogbnVtYmVyLFxuKTogW3N0YXJ0VGltZXN0YW1wOiBudW1iZXIsIGVuZFRpbWVzdGFtcDogbnVtYmVyXSB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IChEYXRlLm5vdygpIC8gMTAwMCkgLSBlbGVtZW50VGltZVxuICBjb25zdCBlbmRUaW1lID0gc3RhcnRUaW1lICsgZWxlbWVudER1cmF0aW9uXG4gIHJldHVybiBbTWF0aC5mbG9vcihzdGFydFRpbWUpLCBNYXRoLmZsb29yKGVuZFRpbWUpXVxufVxuIiwgImltcG9ydCB7IEFzc2V0cywgQWN0aXZpdHlUeXBlLCBnZXRUaW1lc3RhbXBzIH0gZnJvbSAncHJlbWlkJ1xuXG5jb25zdCBwcmVzZW5jZSA9IG5ldyBQcmVzZW5jZSh7XG4gIGNsaWVudElkOiAnMTM3NzI5NTA5MjU3ODEyMzkyNidcbn0pXG5cbmNvbnN0IGJyb3dzaW5nVGltZXN0YW1wID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMClcblxuLy8gU3RvcmUgdmlkZW8gZGF0YVxubGV0IGRhdGE6IHtcbiAgY3VyclRpbWU6IG51bWJlclxuICBkdXJhdGlvbjogbnVtYmVyXG4gIHBhdXNlZDogYm9vbGVhblxuICB0aW1lc3RhbXA6IG51bWJlclxufSA9IG51bGwgYXMgYW55XG5cbi8vIFRyYWNrIHRoZSBsYXN0IFVSTCB0byBkZXRlY3QgcGFnZSBjaGFuZ2VzXG5sZXQgbGFzdFVybCA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWZcbmxldCB1cmxDaGVja0ludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbFxuXG5lbnVtIEFjdGl2aXR5QXNzZXRzIHtcbiAgTG9nbyA9ICdodHRwczovL2kucGluaW1nLmNvbS83MzZ4L2NmLzA4LzRlL2NmMDg0ZTUzYWIxYTE1MzY2MmM1Y2I5NmMxOTNhMjg0LmpwZycsXG4gIFNlYXJjaCA9IEFzc2V0cy5TZWFyY2gsXG4gIFBsYXkgPSBBc3NldHMuUGxheSxcbiAgUGF1c2UgPSBBc3NldHMuUGF1c2Vcbn1cblxuLy8gSGFuZGxlIGlmcmFtZSBkYXRhIHdpdGggdGltZXN0YW1wIHRvIGRldGVjdCBmcmVzaG5lc3NcbnByZXNlbmNlLm9uKCdpRnJhbWVEYXRhJywgKGlmcmFtZURhdGE6IHsgY3VyclRpbWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlciwgcGF1c2VkOiBib29sZWFuIH0pID0+IHtcbiAgaWYgKGlmcmFtZURhdGEuY3VyclRpbWUgJiYgaWZyYW1lRGF0YS5kdXJhdGlvbikge1xuICAgIC8vIFVwZGF0ZSBkYXRhIHdpdGggdGltZXN0YW1wIChyZXVzZSBvYmplY3QgaWYgcG9zc2libGUpXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGRhdGEuY3VyclRpbWUgPSBpZnJhbWVEYXRhLmN1cnJUaW1lXG4gICAgICBkYXRhLmR1cmF0aW9uID0gaWZyYW1lRGF0YS5kdXJhdGlvblxuICAgICAgZGF0YS5wYXVzZWQgPSBpZnJhbWVEYXRhLnBhdXNlZFxuICAgICAgZGF0YS50aW1lc3RhbXAgPSBEYXRlLm5vdygpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSB7XG4gICAgICAgIGN1cnJUaW1lOiBpZnJhbWVEYXRhLmN1cnJUaW1lLFxuICAgICAgICBkdXJhdGlvbjogaWZyYW1lRGF0YS5kdXJhdGlvbixcbiAgICAgICAgcGF1c2VkOiBpZnJhbWVEYXRhLnBhdXNlZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfVxuICB9XG59KVxuXG4vLyBDaGVjayBmb3IgVVJMIGNoYW5nZXMgZXZlcnkgc2Vjb25kXG51cmxDaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICBjb25zdCBjdXJyZW50VXJsID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZlxuICBpZiAoY3VycmVudFVybCAhPT0gbGFzdFVybCkge1xuICAgIGRhdGEgPSBudWxsIGFzIGFueVxuICAgIGxhc3RVcmwgPSBjdXJyZW50VXJsXG4gIH1cbn0sIDEwMDApXG5cbnByZXNlbmNlLm9uKCdVcGRhdGVEYXRhJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBwcmVzZW5jZURhdGE6IFByZXNlbmNlRGF0YSA9IHtcbiAgICBzdGFydFRpbWVzdGFtcDogYnJvd3NpbmdUaW1lc3RhbXAsXG4gICAgdHlwZTogQWN0aXZpdHlUeXBlLldhdGNoaW5nXG4gIH1cbiAgXG4gIGNvbnN0IHsgcGF0aG5hbWUsIHNlYXJjaCwgaHJlZiB9ID0gZG9jdW1lbnQubG9jYXRpb25cbiAgY29uc3QgYnV0dG9ucyA9IGF3YWl0IHByZXNlbmNlLmdldFNldHRpbmc8Ym9vbGVhbj4oJ2J1dHRvbnMnKVxuICBjb25zdCB0aW1lc3RhbXBzID0gYXdhaXQgcHJlc2VuY2UuZ2V0U2V0dGluZzxib29sZWFuPigndGltZXN0YW1wcycpXG4gIFxuICAvLyBDaGVjayBpZiBkYXRhIGlzIHN0YWxlIChtb3JlIHRoYW4gMyBzZWNvbmRzIG9sZClcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICBpZiAoZGF0YSAmJiBub3cgLSBkYXRhLnRpbWVzdGFtcCA+IDMwMDApIHtcbiAgICBkYXRhID0gbnVsbCBhcyBhbnlcbiAgfVxuICBcbiAgLy8gU2V0IGRlZmF1bHQgbG9nbyBvbmx5IGZvciBob21lcGFnZSBhbmQgbm9uLWFuaW1lIHBhZ2VzXG4gIGlmIChwYXRobmFtZSA9PT0gJy8nKSB7XG4gICAgcHJlc2VuY2VEYXRhLmxhcmdlSW1hZ2VLZXkgPSBBY3Rpdml0eUFzc2V0cy5Mb2dvXG4gIH1cblxuICAvLyBIb21lcGFnZVxuICBpZiAocGF0aG5hbWUgPT09ICcvaG9tZS8nKSB7XG4gICAgcHJlc2VuY2VEYXRhLmRldGFpbHMgPSAnQnJvd3NpbmcgSG9tZXBhZ2UnXG4gICAgcHJlc2VuY2VEYXRhLnNtYWxsSW1hZ2VLZXkgPSBBY3Rpdml0eUFzc2V0cy5TZWFyY2hcbiAgfVxuXG4gIC8vIFNlYXJjaCBwYWdlXG4gIGVsc2UgaWYgKHNlYXJjaC5zdGFydHNXaXRoKCc/cz0nKSkge1xuICAgIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaDEuc2VjdGlvbi10aXRsZSBzcGFuJyk/LnRleHRDb250ZW50XG4gICAgcHJlc2VuY2VEYXRhLmRldGFpbHMgPSAnU2VhcmNoaW5nJ1xuICAgIHByZXNlbmNlRGF0YS5zdGF0ZSA9IHNlYXJjaFF1ZXJ5ID8gYGZvciBcIiR7c2VhcmNoUXVlcnl9XCJgIDogJ2ZvciBhbmltZSdcbiAgICBwcmVzZW5jZURhdGEuc21hbGxJbWFnZUtleSA9IEFjdGl2aXR5QXNzZXRzLlNlYXJjaFxuICB9XG5cbiAgLy8gQ2F0ZWdvcnkgcGFnZVxuICBlbHNlIGlmIChwYXRobmFtZS5zdGFydHNXaXRoKCcvY2F0ZWdvcnkvJykpIHtcbiAgICBjb25zdCBzZWFyY2hRdWVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gxLnNlY3Rpb24tdGl0bGUgc3BhbicpPy50ZXh0Q29udGVudFxuICAgIHByZXNlbmNlRGF0YS5kZXRhaWxzID0gJ0Jyb3dzaW5nIENhdGVnb3J5J1xuICAgIHByZXNlbmNlRGF0YS5zdGF0ZSA9IHNlYXJjaFF1ZXJ5ID8gYGZvciBcIiR7c2VhcmNoUXVlcnl9XCJgIDogJ2ZvciBhbmltZSdcbiAgICBwcmVzZW5jZURhdGEuc21hbGxJbWFnZUtleSA9IEFjdGl2aXR5QXNzZXRzLlNlYXJjaFxuICB9XG5cbiAgLy8gU2VyaWVzIGNhdGVnb3J5IHBhZ2VcbiAgZWxzZSBpZiAocGF0aG5hbWUgPT09ICcvc2VyaWVzLycpIHtcbiAgICBwcmVzZW5jZURhdGEuZGV0YWlscyA9ICdCcm93c2luZyBTZXJpZXMgQ2F0ZWdvcnknXG4gICAgcHJlc2VuY2VEYXRhLnNtYWxsSW1hZ2VLZXkgPSBBY3Rpdml0eUFzc2V0cy5TZWFyY2hcbiAgfVxuXG4gIC8vIE1vdmllIGNhdGVnb3J5IHBhZ2VcbiAgZWxzZSBpZiAocGF0aG5hbWUgPT09ICcvbW92aWUvJykge1xuICAgIHByZXNlbmNlRGF0YS5kZXRhaWxzID0gJ0Jyb3dzaW5nIE1vdmllcyBDYXRlZ29yeSdcbiAgICBwcmVzZW5jZURhdGEuc21hbGxJbWFnZUtleSA9IEFjdGl2aXR5QXNzZXRzLlNlYXJjaFxuICB9XG5cbiAgLy8gU2VyaWVzIHBhZ2VcbiAgZWxzZSBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aCgnL3Nlcmllcy8nKSkge1xuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaDEnKT8udGV4dENvbnRlbnRcbiAgICBjb25zdCB0aHVtYm5haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdC10aHVtYm5haWwgaW1nJyk/LmdldEF0dHJpYnV0ZSgnc3JjJylcbiAgICBcbiAgICBwcmVzZW5jZURhdGEuZGV0YWlscyA9ICdWaWV3aW5nIFNlcmllcydcbiAgICBwcmVzZW5jZURhdGEuc3RhdGUgPSB0aXRsZSB8fCAnVW5rbm93biBTZXJpZXMnXG4gICAgaWYgKHRodW1ibmFpbCkge1xuICAgICAgcHJlc2VuY2VEYXRhLmxhcmdlSW1hZ2VLZXkgPSBTdHJpbmcodGh1bWJuYWlsKVxuICAgICAgcHJlc2VuY2VEYXRhLmxhcmdlSW1hZ2VUZXh0ID0gdGl0bGUgfHwgJ1Vua25vd24gU2VyaWVzJ1xuICAgIH1cbiAgICBpZiAoYnV0dG9ucykge1xuICAgICAgcHJlc2VuY2VEYXRhLmJ1dHRvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogJ1ZpZXcgRGV0YWlscycsXG4gICAgICAgICAgdXJsOiBocmVmXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9XG4gIH1cblxuICAvLyBNb3ZpZSBwYWdlXG4gIGVsc2UgaWYgKHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9tb3ZpZS8nKSAmJiBwYXRobmFtZSAhPT0gJy9tb3ZpZS8nKSB7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoMScpPy50ZXh0Q29udGVudFxuICAgIGNvbnN0IHRodW1ibmFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3N0LXRodW1ibmFpbCBpbWcnKT8uZ2V0QXR0cmlidXRlKCdzcmMnKVxuICAgIFxuICAgIHByZXNlbmNlRGF0YS5zdGF0ZSA9ICdNb3ZpZSdcbiAgICBwcmVzZW5jZURhdGEuZGV0YWlscyA9IHRpdGxlIHx8ICdVbmtub3duIE1vdmllJ1xuICAgIGlmICh0aHVtYm5haWwpIHtcbiAgICAgIHByZXNlbmNlRGF0YS5sYXJnZUltYWdlS2V5ID0gU3RyaW5nKHRodW1ibmFpbClcbiAgICAgIHByZXNlbmNlRGF0YS5sYXJnZUltYWdlVGV4dCA9IHRpdGxlIHx8ICdVbmtub3duIE1vdmllJ1xuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgdmlkZW8gZGF0YSBmb3IgdGltZXN0YW1wcyAoZm9yIGRpcmVjdCBtb3ZpZSB3YXRjaGluZylcbiAgICBpZiAoZGF0YSAmJiB0aW1lc3RhbXBzKSB7XG4gICAgICBpZiAoIWRhdGEucGF1c2VkICYmIGRhdGEuY3VyclRpbWUgPiAwICYmIGRhdGEuZHVyYXRpb24gPiAwKSB7XG4gICAgICAgIC8vIFZpZGVvIGlzIHBsYXlpbmcgLSBjYWxjdWxhdGUgdGltZXN0YW1wcyBvbmx5IHdoZW4gbmVlZGVkXG4gICAgICAgIGNvbnN0IFtzdGFydFRpbWVzdGFtcCwgZW5kVGltZXN0YW1wXSA9IGdldFRpbWVzdGFtcHMoXG4gICAgICAgICAgTWF0aC5mbG9vcihkYXRhLmN1cnJUaW1lKSxcbiAgICAgICAgICBNYXRoLmZsb29yKGRhdGEuZHVyYXRpb24pXG4gICAgICAgIClcbiAgICAgICAgcHJlc2VuY2VEYXRhLnN0YXJ0VGltZXN0YW1wID0gc3RhcnRUaW1lc3RhbXBcbiAgICAgICAgcHJlc2VuY2VEYXRhLmVuZFRpbWVzdGFtcCA9IGVuZFRpbWVzdGFtcFxuICAgICAgICBwcmVzZW5jZURhdGEuc21hbGxJbWFnZUtleSA9IEFzc2V0cy5QbGF5XG4gICAgICAgIHByZXNlbmNlRGF0YS5zbWFsbEltYWdlVGV4dCA9ICdXYXRjaGluZydcbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gVmlkZW8gaXMgcGF1c2VkXG4gICAgICAgIHByZXNlbmNlRGF0YS5zbWFsbEltYWdlS2V5ID0gQXNzZXRzLlBhdXNlIFxuICAgICAgICBwcmVzZW5jZURhdGEuc21hbGxJbWFnZVRleHQgPSAnUGF1c2VkJ1xuICAgICAgICBkZWxldGUgcHJlc2VuY2VEYXRhLnN0YXJ0VGltZXN0YW1wXG4gICAgICAgIGRlbGV0ZSBwcmVzZW5jZURhdGEuZW5kVGltZXN0YW1wXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChidXR0b25zKSB7XG4gICAgICBwcmVzZW5jZURhdGEuYnV0dG9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiAnV2F0Y2ggTW92aWUnLFxuICAgICAgICAgIHVybDogaHJlZlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfVxuICB9XG5cbiAgLy8gV2F0Y2ggcGFnZSBcbiAgZWxzZSBpZiAocGF0aG5hbWUuaW5jbHVkZXMoJy9lcGkvJykpIHtcbiAgICBjb25zdCByYXd0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbnRyeS10aXRsZScpPy50ZXh0Q29udGVudCB8fCAnJ1xuICAgIGNvbnN0IHRpdGxlID0gcmF3dGl0bGUucmVwbGFjZSgvU2Vhc29uXFxzXFxkK1xcc0VwaXNvZGVcXHNcXGQrfFxcZCt4XFxkKyQvaSwgJycpLnRyaW0oKVxuICAgIGNvbnN0IGVwaXNvZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2Vhc29uLWVwaXNvZGUnKT8udGV4dENvbnRlbnQgfHwgJydcbiAgICBjb25zdCB0aHVtYm5haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdC10aHVtYm5haWwgaW1nJyk/LmdldEF0dHJpYnV0ZSgnc3JjJylcblxuICAgIHByZXNlbmNlRGF0YS5kZXRhaWxzID0gdGl0bGUgfHwgJ1Vua25vd24gQW5pbWUnXG4gICAgcHJlc2VuY2VEYXRhLnN0YXRlID0gZXBpc29kZSB8fCAnVW5rbm93biBFcGlzb2RlJ1xuXG4gICAgaWYgKHRodW1ibmFpbCkge1xuICAgICAgcHJlc2VuY2VEYXRhLmxhcmdlSW1hZ2VLZXkgPSBTdHJpbmcodGh1bWJuYWlsKVxuICAgICAgcHJlc2VuY2VEYXRhLmxhcmdlSW1hZ2VUZXh0ID0gdGl0bGUgfHwgJ1Vua25vd24gQW5pbWUnXG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHZpZGVvIGRhdGEgZm9yIHRpbWVzdGFtcHNcbiAgICBpZiAoZGF0YSAmJiB0aW1lc3RhbXBzKSB7XG4gICAgICBpZiAoIWRhdGEucGF1c2VkICYmIGRhdGEuY3VyclRpbWUgPiAwICYmIGRhdGEuZHVyYXRpb24gPiAwKSB7XG4gICAgICAgIC8vIFZpZGVvIGlzIHBsYXlpbmcgLSBjYWxjdWxhdGUgdGltZXN0YW1wcyBvbmx5IHdoZW4gbmVlZGVkXG4gICAgICAgIGNvbnN0IFtzdGFydFRpbWVzdGFtcCwgZW5kVGltZXN0YW1wXSA9IGdldFRpbWVzdGFtcHMoXG4gICAgICAgICAgTWF0aC5mbG9vcihkYXRhLmN1cnJUaW1lKSxcbiAgICAgICAgICBNYXRoLmZsb29yKGRhdGEuZHVyYXRpb24pXG4gICAgICAgIClcbiAgICAgICAgcHJlc2VuY2VEYXRhLnN0YXJ0VGltZXN0YW1wID0gc3RhcnRUaW1lc3RhbXBcbiAgICAgICAgcHJlc2VuY2VEYXRhLmVuZFRpbWVzdGFtcCA9IGVuZFRpbWVzdGFtcFxuICAgICAgICBwcmVzZW5jZURhdGEuc21hbGxJbWFnZUtleSA9IEFzc2V0cy5QbGF5XG4gICAgICAgIHByZXNlbmNlRGF0YS5zbWFsbEltYWdlVGV4dCA9ICdXYXRjaGluZydcbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gVmlkZW8gaXMgcGF1c2VkXG4gICAgICAgIHByZXNlbmNlRGF0YS5zbWFsbEltYWdlS2V5ID0gQXNzZXRzLlBhdXNlIFxuICAgICAgICBwcmVzZW5jZURhdGEuc21hbGxJbWFnZVRleHQgPSAnUGF1c2VkJ1xuICAgICAgICBkZWxldGUgcHJlc2VuY2VEYXRhLnN0YXJ0VGltZXN0YW1wXG4gICAgICAgIGRlbGV0ZSBwcmVzZW5jZURhdGEuZW5kVGltZXN0YW1wXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGJ1dHRvbnMpIHtcbiAgICAgIC8vIFNpbXBsaWZpZWQgYnV0dG9uIGNyZWF0aW9uIHdpdGggc2FmZXIgcGF0aCBoYW5kbGluZ1xuICAgICAgcHJlc2VuY2VEYXRhLmJ1dHRvbnMgPSBbeyBsYWJlbDogJ1dhdGNoIEVwaXNvZGUnLCB1cmw6IGhyZWYgfV1cbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGV4dHJhY3QgYW5pbWUgSUQgZm9yIFwiVmlldyBTZXJpZXNcIiBidXR0b25cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gcGF0aG5hbWUubWF0Y2goL1xcL2VwaVxcLyhbXlxcL10rKS8pXG4gICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICAgIGNvbnN0IGFuaW1lSWQgPSBtYXRjaFsxXS5yZXBsYWNlKC8tXFxkK3hcXGQrJC8sICcnKVxuICAgICAgICAgIHByZXNlbmNlRGF0YS5idXR0b25zLnB1c2goeyBcbiAgICAgICAgICAgIGxhYmVsOiAnVmlldyBTZXJpZXMnLCBcbiAgICAgICAgICAgIHVybDogYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vc2VyaWVzLyR7YW5pbWVJZH1gIFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgYW55dGhpbmcgZmFpbHMsIHdlIGFscmVhZHkgaGF2ZSB0aGUgXCJXYXRjaCBFcGlzb2RlXCIgYnV0dG9uXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIHRoaXMgY2hlY2sgcmlnaHQgaGVyZSwgYmVmb3JlIHRoZSBmaW5hbCBzZXRBY3Rpdml0eSBjYWxsc1xuICBpZiAoIWJ1dHRvbnMgJiYgcHJlc2VuY2VEYXRhLmJ1dHRvbnMpIHtcbiAgICBkZWxldGUgcHJlc2VuY2VEYXRhLmJ1dHRvbnNcbiAgfVxuXG4gIC8vIFRoZXNlIHNob3VsZCBiZSB0aGUgbGFzdCBsaW5lcyBvZiB5b3VyIFVwZGF0ZURhdGEgZXZlbnQgaGFuZGxlclxuICBpZiAocHJlc2VuY2VEYXRhLmRldGFpbHMpIFxuICAgIHByZXNlbmNlLnNldEFjdGl2aXR5KHByZXNlbmNlRGF0YSlcbiAgZWxzZSBcbiAgICBwcmVzZW5jZS5zZXRBY3Rpdml0eSgpXG59KSJdLAogICJtYXBwaW5ncyI6ICJtQkFNTyxTQUFTQSxFQUNkQyxFQUNBQyxFQUNnRCxDQUNoRCxJQUFNQyxFQUFhLEtBQUssSUFBSSxFQUFJLElBQVFGLEVBQ2xDRyxFQUFVRCxFQUFZRCxFQUM1QixNQUFPLENBQUMsS0FBSyxNQUFNQyxDQUFTLEVBQUcsS0FBSyxNQUFNQyxDQUFPLENBQUMsQ0FDcEQsQ0NYQSxJQUFNQyxFQUFXLElBQUksU0FBUyxDQUM1QixTQUFVLHFCQUNaLENBQUMsRUFFS0MsRUFBb0IsS0FBSyxNQUFNLEtBQUssSUFBSSxFQUFJLEdBQUks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RUFBYSxlQUFpQixTQUM5QixPQUFPQSxFQUFhLGVBQ3BCLE9BQU9BLEVBQWEsYUFJeEIsR0FBSUksRUFBUyxDQUVYSixFQUFhLFFBQVUsQ0FBQyxDQUFFLE1BQU8sZ0JBQWlCLElBQUtHLENBQUssQ0FBQyxFQUc3RCxHQUFJLENBQ0YsSUFBTVcsRUFBUWIsRUFBUyxNQUFNLGlCQUFpQixFQUM5QyxHQUFJYSxHQUFTQSxFQUFNLENBQUMsRUFBRyxDQUNyQixJQUFNQyxFQUFVRCxFQUFNLENBQUMsRUFBRSxRQUFRLFlBQWEsRUFBRSxFQUNoRGQsRUFBYSxRQUFRLEtBQUssQ0FDeEIsTUFBTyxjQUNQLElBQUssR0FBRyxPQUFPLFNBQVMsTUFBTSxXQUFXZSxDQUFPLEVBQ2xELENBQUMsQ0FDSCxDQUNGLE1BQVksQ0FFWixDQUNGLENBQ0YsQ0FHSSxDQUFDWCxHQUFXSixFQUFhLFNBQzNCLE9BQU9BLEVBQWEsUUFJbEJBLEVBQWEsUUFDZlIsRUFBUyxZQUFZUSxDQUFZLEVBRWpDUixFQUFTLFlBQVksQ0FDekIsQ0FBQyIsCiAgIm5hbWVzIjogWyJnZXRUaW1lc3RhbXBzIiwgImVsZW1lbnRUaW1lIiwgImVsZW1lbnREdXJhdGlvbiIsICJzdGFydFRpbWUiLCAiZW5kVGltZSIsICJwcmVzZW5jZSIsICJicm93c2luZ1RpbWVzdGFtcCIsICJkYXRhIiwgImxhc3RVcmwiLCAidXJsQ2hlY2tJbnRlcnZhbCIsICJBY3Rpdml0eUFzc2V0cyIsICJpZnJhbWVEYXRhIiwgImN1cnJlbnRVcmwiLCAicHJlc2VuY2VEYXRhIiwgInBhdGhuYW1lIiwgInNlYXJjaCIsICJocmVmIiwgImJ1dHRvbnMiLCAidGltZXN0YW1wcyIsICJub3ciLCAic2VhcmNoUXVlcnkiLCAidGl0bGUiLCAidGh1bWJuYWlsIiwgInN0YXJ0VGltZXN0YW1wIiwgImVuZFRpbWVzdGFtcCIsICJnZXRUaW1lc3RhbXBzIiwgImVwaXNvZGUiLCAibWF0Y2giLCAiYW5pbWVJZCJdCn0K
