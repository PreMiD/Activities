interface ImageKeyMap {
	[key: string]: { image: string };
}

const enum Assets {
	Logo = "https://cdn.discordapp.com/app-assets/778572824708775946/778589484630802472.png?size=512",
	Idle = "https://cdn.discordapp.com/app-assets/778572824708775946/778589525693562881.png?size=512",
	Ghlg = "https://cdn.discordapp.com/app-assets/778572824708775946/778599011362930688.png?size=512",
	Arduino = "https://cdn.discordapp.com/app-assets/778572824708775946/778626496792363050.png?size=512",
	Appveyor = "https://cdn.discordapp.com/app-assets/778572824708775946/778626496792494113.png?size=512",
	Assembly = "https://cdn.discordapp.com/app-assets/778572824708775946/778626496993820694.png?size=512",
	Ahk = "https://cdn.discordapp.com/app-assets/778572824708775946/778626496998801408.png?size=512",
	Angular = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497085702185.png?size=512",
	Android = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497098809395.png?size=512",
	As = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497237352488.png?size=512",
	Applescript = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497249280060.png?size=512",
	C = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497435009074.png?size=512",
	Asp = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497459388466.png?size=512",
	Bower = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497480753162.png?size=512",
	Bat = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497568702534.png?size=512",
	Autoit = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497695055942.png?size=512",
	Cargo = "https://cdn.discordapp.com/app-assets/778572824708775946/778626497791393834.png?size=512",
	Cmake = "https://cdn.discordapp.com/app-assets/778572824708775946/778626498584117309.png?size=512",
	Clojure = "https://cdn.discordapp.com/app-assets/778572824708775946/778626498915467304.png?size=512",
	Circleci = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499082977310.png?size=512",
	Brainfuck = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499493494815.png?size=512",
	Css = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499553001504.png?size=512",
	Crystal = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499577643049.png?size=512",
	Elm = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603818156032.png?size=512",
	Cshtml = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499674112071.png?size=512",
	Docker = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499728113735.png?size=512",
	Cssmap = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499750264833.png?size=512",
	Coffee = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499762454569.png?size=512",
	Dart = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499874914304.png?size=512",
	Dm = "https://cdn.discordapp.com/app-assets/778572824708775946/778626499938091038.png?size=512",
	Elixir = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603764416543.png?size=512",
	D = "https://cdn.discordapp.com/app-assets/778572824708775946/778626500042948648.png?size=512",
	Cuda = "https://cdn.discordapp.com/app-assets/778572824708775946/778626500068245514.png?size=512",
	Denizen = "https://cdn.discordapp.com/app-assets/778572824708775946/778626500080697344.png?size=512",
	Cpp = "https://cdn.discordapp.com/app-assets/778572824708775946/778626500097474591.png?size=512",
	Ejs = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603915804722.png?size=512",
	Delphi = "https://cdn.discordapp.com/app-assets/778572824708775946/778626500324753419.png?size=512",
	Csharp = "https://cdn.discordapp.com/app-assets/778572824708775946/778626500340613121.png?size=512",
	Editorconfig = "https://cdn.discordapp.com/app-assets/778572824708775946/778626500462903376.png?size=512",
	Fsharp = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603567677501.png?size=512",
	Flowconfig = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603625873468.png?size=512",
	Env = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603626266624.png?size=512",
	Firebase = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603861016596.png?size=512",
	Git = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603898634251.png?size=512",
	Gemfile = "https://cdn.discordapp.com/app-assets/778572824708775946/778626603974000653.png?size=512",
	Haskell = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604011225120.png?size=512",
	Erlang = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604058279943.png?size=512",
	Heroku = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604255019048.png?size=512",
	Gradle = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604263145472.png?size=512",
	Go = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604317802556.png?size=512",
	Handlebars = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604318195752.png?size=512",
	Eslint = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604410339348.png?size=512",
	Haxe = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604451889202.png?size=512",
	Harbour = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604481511454.png?size=512",
	Gulp = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604515590194.png?size=512",
	Godot = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604522930207.png?size=512",
	Graphql = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604536299530.png?size=512",
	Groovy = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604611403786.png?size=512",
	Gruntfile = "https://cdn.discordapp.com/app-assets/778572824708775946/778626604862537748.png?size=512",
	Json = "https://cdn.discordapp.com/app-assets/778572824708775946/778626758777372714.png?size=512",
	Julia = "https://cdn.discordapp.com/app-assets/778572824708775946/778626758819446795.png?size=512",
	Log = "https://cdn.discordapp.com/app-assets/778572824708775946/778626758936494100.png?size=512",
	Hjson = "https://cdn.discordapp.com/app-assets/778572824708775946/778626758995083265.png?size=512",
	Jsx = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759019986965.png?size=512",
	Js = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759079755776.png?size=512",
	Jsmap = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759167442984.png?size=512",
	Makefile = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759196672020.png?size=512",
	Kotlin = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759264043049.png?size=512",
	Html = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759309787136.png?size=512",
	Http = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759326957588.png?size=512",
	Lua = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759330365480.png?size=512",
	Less = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759347142726.png?size=512",
	Livescript = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759356186624.png?size=512",
	Jest = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759423688755.png?size=512",
	Java = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759427489833.png?size=512",
	Lisp = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759494467584.png?size=512",
	Jupyter = "https://cdn.discordapp.com/app-assets/778572824708775946/778626759566426112.png?size=512",
	Manifest = "https://cdn.discordapp.com/app-assets/778572824708775946/778626863445704714.png?size=512",
	Marko = "https://cdn.discordapp.com/app-assets/778572824708775946/778626863508619265.png?size=512",
	Npm = "https://cdn.discordapp.com/app-assets/778572824708775946/778626863568125963.png?size=512",
	Nim = "https://cdn.discordapp.com/app-assets/778572824708775946/778626863626846239.png?size=512",
	Markdownx = "https://cdn.discordapp.com/app-assets/778572824708775946/778626863802220544.png?size=512",
	Markdown = "https://cdn.discordapp.com/app-assets/778572824708775946/778626863849275432.png?size=512",
	Nodemon = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864062529536.png?size=512",
	R = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864168042518.png?size=512",
	Prisma = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864247472140.png?size=512",
	Reasonml = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864256253972.png?size=512",
	Python = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864309731370.png?size=512",
	Php = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864310779915.png?size=512",
	Powershell = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864457318400.png?size=512",
	Ocaml = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864473178162.png?size=512",
	Perl = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864590880770.png?size=512",
	Prettier = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864625352755.png?size=512",
	Pawn = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864632954891.png?size=512",
	Purescript = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864679616522.png?size=512",
	Objc = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864754196501.png?size=512",
	Ponylang = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864779362315.png?size=512",
	Postcss = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864801382441.png?size=512",
	Pug = "https://cdn.discordapp.com/app-assets/778572824708775946/778626864889069638.png?size=512",
	Pascal = "https://cdn.discordapp.com/app-assets/778572824708775946/778626865006379018.png?size=512",
	Processing = "https://cdn.discordapp.com/app-assets/778572824708775946/778626865317150780.png?size=512",
	Ruby = "https://cdn.discordapp.com/app-assets/778572824708775946/778626966601465857.png?size=512",
	Rust = "https://cdn.discordapp.com/app-assets/778572824708775946/778626966831366158.png?size=512",
	Scss = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967024042056.png?size=512",
	Stylus = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967082762293.png?size=512",
	Shell = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967137288253.png?size=512",
	Scala = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967272423444.png?size=512",
	Sqf = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967373086730.png?size=512",
	Sql = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967502716958.png?size=512",
	Svelte = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967619633182.png?size=512",
	Swift = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967653056523.png?size=512",
	Svg = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967657381898.png?size=512",
	Toml = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967665901589.png?size=512",
	Txt = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967741530153.png?size=512",
	Travis = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967754113034.png?size=512",
	Tex = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967783342097.png?size=512",
	Text = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967834066985.png?size=512",
	Tsx = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967846125629.png?size=512",
	Ts = "https://cdn.discordapp.com/app-assets/778572824708775946/778626967871422494.png?size=512",
	V = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968030806086.png?size=512",
	Yaml = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968077205515.png?size=512",
	Vb = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968093589515.png?size=512",
	Vcxproj = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968236720139.png?size=512",
	Yarn = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968471863327.png?size=512",
	Wasm = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968497291294.png?size=512",
	Vala = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968542773268.png?size=512",
	Xml = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968546443264.png?size=512",
	Vue = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968559550474.png?size=512",
	Vba = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968563744808.png?size=512",
	Vscodeignore = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968580653066.png?size=512",
	Zig = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968656281621.png?size=512",
	Webpack = "https://cdn.discordapp.com/app-assets/778572824708775946/778626968668078089.png?size=512",
	Twig = "https://cdn.discordapp.com/app-assets/778572824708775946/778665403249328168.png?size=512",
	Gatsbyjs = "https://cdn.discordapp.com/app-assets/778572824708775946/778669774548238357.png?size=512",
}

const presence = new Presence({
		clientId: "778572824708775946",
	}),
	// Maps editor mode titles to respective images
	langMap: ImageKeyMap = {
		"arma header file": { image: Assets.Sqf },
		actionscript: { image: Assets.As },
		autohotkey: { image: Assets.Ahk },
		batch: { image: Assets.Bat },
		"babel javascript": { image: Assets.Js },
		"c#": { image: Assets.Csharp },
		"c++": { image: Assets.Cpp },
		"cmake cache": { image: Assets.Cmake },
		coffeescript: { image: Assets.Coffee },
		"cuda c++": { image: Assets.Cuda },
		diet: { image: Assets.D },
		"d++": { image: Assets.D },
		"dm script": { image: Assets.Dm },
		"denizen script": { image: Assets.Denizen },
		"dlangui markup language": { image: Assets.D },
		dockerfile: { image: Assets.Docker },
		"embedded elixir": { image: Assets.Elixir },
		"f#": { image: Assets.Fsharp },
		gdscript: { image: Assets.Godot },
		"git commit message": { image: Assets.Git },
		"git rebase message": { image: Assets.Git },
		"html (c#)": { image: Assets.Cshtml },
		"html (embedded elixir)": { image: Assets.Elixir },
		"html (twig)": { image: Assets.Twig },
		hxml: { image: Assets.Haxe},
		"haxe ast dump": { image: Assets.Haxe },
		ignore: { image: Assets.Git },
		jsonc: { image: 		Assets.Json },
		javascript: { image: Assets.Js },
		"javascript react": { image: Assets.Jsx },
		"javascript for automation (jxa)": { image: Assets.Js },
		"julia markdown": { image: Assets.Julia },
		"literate haskell": { image: Assets.Haskell },
		"markdown react": { image: Assets.Markdownx },
		merlin: { image: Assets.Ocaml },
		ocamlbuild: { image: Assets.Ocaml },
		opam: { image: Assets.Ocaml },
		nimble: { image: Assets.Nim },
		"objective-c": { image: Assets.Objc },
		"objective-c++": { image: Assets.Objc },
		"perl 6": { image: Assets.Perl },
		"plain text": { image: Assets.Txt },
		reason: { image: Assets.Reasonml },
		sass: { image: Assets.Scss },
		"shell script": { image: Assets.Shell },
		typescript: { image: Assets.Ts },
		"typescript react": { image: Assets.Tsx },
		"visual basic": { image: Assets.Vb },
		"vue.js": { image: Assets.Vue },
		"vue-postcss": { image: Assets.Postcss },
		"vue-html": { image: Assets.Html },
		xsl: { image: Assets.Xml },
		webassembly: { image: Assets.Wasm },
		"arsd.dscript": { image: Assets.D },
		"haxe.argument": { image: Assets.Haxe },
		"haxe.type": { image: Assets.Haxe },
		"ocaml.hover.info": { image: Assets.Ocaml },
		"ocaml.hover.type": { image: Assets.Ocaml },
		"reason.hover.info": { image: Assets.Reasonml },
		"reason.hover.signature": { image: Assets.Reasonml },
		"reason.hover.type": { image: Assets.Reasonml },
		"jest-snapshot": { image: Assets.Jest },
		erb: { image: Assets.Ruby },
		"x86 and x86_64 Assembly": { image: Assets.Assembly },
		// Auto-maps keys to identical image keys
	},
	// https://github.com/iCrawl/discord-vscode/blob/master/src/data/languages.json
	knownExtensions: ImageKeyMap = {
		".ahk": { image: Assets.Ahk },
		".ahkl": { image: Assets.Ahk },
		"androidmanifest.xml": { image: Assets.Android },
		"/^angular[^.]*\\.js$/i": { image: Assets.Angular },
		".applescript": { image: Assets.Applescript },
		"/(\\.)?appveyor\\.yml/i": { image: Assets.Appveyor },
		".ino": { image: Assets.Arduino },
		".swf": { image: Assets.As },
		".as": { image: Assets.As },
		".jsfl": { image: Assets.As },
		".swc": { image: Assets.As },
		".asp": { image: Assets.Asp },
		".asax": { image: Assets.Asp },
		".ascx": { image: Assets.Asp },
		".ashx": { image: Assets.Asp },
		".asmx": { image: Assets.Asp },
		".aspx": { image: Assets.Asp },
		".axd": { image: Assets.Asp },
		"/\\.setTrayTitle(l?a|[ls]?o|out|s|a51|asm|axf|elf|prx|puff|z80)$/i": {
			image: Assets.Assembly,
		},
		".agc": { image: Assets.Assembly },
		".ko": { image: Assets.Assembly },
		".lst": { image: Assets.Assembly },
		"/\\.setTrayTitle((c([+px]{2}?)?-?)?objdump|bsdiff|bin|dat|pak|pdb)$/i": {
			image: Assets.Assembly,
		},
		".d-objdump": { image: Assets.Assembly },
		"/\\.gcode|\\.gco/i": { image: Assets.Assembly },
		"/\\.rpy[bc]$/i": { image: Assets.Assembly },
		"/\\.py[co]$/i": { image: Assets.Assembly },
		".swp": { image: Assets.Assembly },
		".DS_Store": { image: Assets.Assembly },
		".au3": { image: Assets.Autoit },
		"babel.config.js": { image: Assets.Js },
		"/\\.babelrc/i": { image:	Assets.Js },
		".bat": { image: Assets.Bat },
		".batch": { image: Assets.Bat },
		".cmd": { image: Assets.Bat },
		"/\\.setTrayTitle(exe|com|msi)$/i": { image: Assets.Bat },
		".reg": { image: Assets.Bat },
		"/^(\\.bowerrc|bower\\.json|Bowerfile)$/i": { image: Assets.Bower },
		"/\\.bf?$/i": { image: Assets.Brainfuck},
		"/\\.c$/i": { image: Assets.C },
		"/(cargo.toml|cargo.lock)/i": { image: Assets.Cargo },
		"circle.yml": { image: Assets.Circleci },
		".clj": { image: Assets.Clojure },
		".cl2": { image: Assets.Clojure },
		".cljc": { image: Assets.Clojure },
		".cljx": { image: Assets.Clojure },
		".hic": { image: Assets.Clojure },
		"/\\.cljs(cm)?$/i": { image: Assets.Clojure },
		".cmake": { image: Assets.Cmake },
		"/^CMakeLists\\.txt$/": { image: Assets.Cmake },
		"/\\.codeclimate\\.setTrayTitle(yml|json)/i": { image: Assets.Text },
		".coffee": { image: Assets.Coffee },
		".cjsx": { image: Assets.Coffee },
		".coffee.ecr": { image: Assets.Coffee },
		".coffee.erb": { image: Assets.Coffee },
		".litcoffee": { image: Assets.Coffee },
		".iced": { image: Assets.Coffee },
		"/\\.c[+px]{2}$|\\.cc$/i": { image: Assets.Cpp },
		"/\\.h[+px]{2}$/i": { image: Assets.Cpp },
		"/\\.[it]pp$/i": { image: Assets.Cpp },
		"/\\.setTrayTitle(tcc|inl)$/i": { image: Assets.Cpp },
		".cats": { image: Assets.Cpp },
		".idc": { image: Assets.Cpp },
		".w": { image: Assets.Cpp },
		".nc": { image: Assets.Cpp },
		".upc": { image: Assets.Cpp },
		".xpm": { image: Assets.Cpp },
		"/\\.e?cr$/i": { image: Assets.Crystal },
		".cs": { image: Assets.Csharp },
		".csx": { image: Assets.Csharp },
		".cshtml": { image: Assets.Cshtml },
		".css.map": { image: Assets.Cssmap },
		".cu": { image: Assets.Cuda },
		"/\\.di?$/i": { image: Assets.D },
		".dart": { image: Assets.Dart },
		".dfm": { image: Assets.Delphi },
		".dpr": { image: Assets.Delphi },
		".dsc": { image: Assets.Delphi },
		".dm": { image: Assets.Dm },
		".dme": { image: Assets.Dm },
		".dmm": { image: Assets.Dm },
		"/^(Dockerfile|docker-compose)|\\.docker(file|ignore)$/i": {
			image:  Assets.Docker,
		},
		"/^docker-sync\\.yml$/i": { image: Assets.Docker },
		".editorconfig": { image:	Assets.Editorconfig },
		".ejs": { image:  Assets.Ejs },
		".ex": { image: Assets.Elixir},
		"/\\.setTrayTitle(exs|l?eex)$/i": { image: Assets.Elixir},
		"/^mix\\.setTrayTitle(exs?|lock)$/i": { image:Assets.Elixir },
		".elm": { image: Assets.Elm },
		".env": { image: Assets.Env },
		".erl": { image: Assets.Erlang },
		".beam": { image: Assets.Erlang },
		".hrl": { image: Assets.Erlang },
		".xrl": { image: Assets.Erlang },
		".yrl": { image: Assets.Erlang },
		".app.src": { image: Assets.Erlang },
		"/^Emakefile$/": { image: Assets.Erlang },
		"/^rebar(\\.config)?\\.lock$/i": { image: Assets.Erlang },
		"/\\.setTrayTitle(eslintrc|eslintignore)/i": { image: Assets.Eslint },
		"/(\\.firebaserc|firebase\\.json)/i": { image: Assets.Firebase },
		".flowconfig": { image:  Assets.Flowconfig },
		".fs": { image: Assets.Fsharp },
		".fsi": { image: Assets.Fsharp },
		".fsscript": { image: Assets.Fsharp },
		".fsx": { image: Assets.Fsharp },
		"/gatsby-(browser|node|ssr|config)\\.js/i": { image: Assets.Gatsbyjs },
		"/^Gemfile(\\.lock)?$/i": { image: Assets.Gemfile },
		"/^\\.git|^\\.keep$|\\.mailmap$/i": { image: Assets.Git },
		".go": { image: Assets.Go },
		".gd": { image: Assets.Godot },
		".gradle": { image: Assets.Gradle },
		gradlew: { image: Assets.Gradle },
		".gql": { image: Assets.Graphql },
		".graphql": { image: Assets.Graphql },
		".groovy": { image: Assets.Groovy },
		".gvy": { image: Assets.Groovy },
		".gy": { image: Assets.Groovy },
		".gsh": { image: Assets.Groovy },
		"/gruntfile\\.setTrayTitle(js|coffee)/i": { image: Assets.Gruntfile },
		"gulpfile.js": { image: Assets.Gulp },
		"/\\.setTrayTitle(hbs|handlebars|(mu)?stache)$/i": { image: Assets.Handlebars },
		".prg": { image: Assets.Harbour },
		".hbp": { image: Assets.Harbour },
		".hbc": { image: Assets.Harbour },
		".rc": { image: Assets.Harbour },
		".fmg": { image: Assets.Harbour },
		".hs": { image: Assets.Haskell },
		".hsc": { image: Assets.Haskell },
		".c2hs": { image: Assets.Haskell },
		".lhs": { image: Assets.Haskell },
		".hx": { image: Assets.Haxe },
		".hxml": { image: Assets.Haxe },
		"/^procfile/i": { image: Assets.Heroku },
		"heroku.yml": { image: Assets.Heroku },
		".hjson": { image: Assets.Hjson },
		"/\\.x?html?$/i": { image: Assets.Html },
		".http": { image: Assets.Http },
		".rest": { image: Assets.Http },
		".jar": { image: Assets.Java },
		".java": { image: Assets.Java },
		"jest.config.js": { image: Assets.Jest },
		".es6": { image: Assets.Js },
		".es": { image: Assets.Js },
		".mjs": { image: Assets.Js },
		".js.map": { image: Assets.Jsmap },
		".jsonc": { image: Assets.Json },
		".jsx": { image: Assets.Jsx },
		"/\\.setTrayTitle(jil|jl)/i": { image: Assets.Julia },
		".ipynb": { image: Assets.Jupyter },
		".kt": { image: Assets.Kotlin },
		".ktm": { image: Assets.Kotlin },
		".kts": { image: Assets.Kotlin },
		".less": { image: Assets.Less },
		".lsp": { image: Assets.Lisp },
		".lisp": { image: Assets.Lisp },
		".l": { image: Assets.Lisp },
		".nl": { image: Assets.Lisp },
		".ny": { image: Assets.Lisp },
		".podsl": { image: Assets.Lisp },
		".sexp": { image: Assets.Lisp },
		".ls": { image: Assets.Livescript },
		".log": { image:  Assets.Log },
		".lua": { image: Assets.Lua },
		".pd_lua": { image: Assets.Lua },
		".rbxs": { image: Assets.Lua },
		".wlua": { image: Assets.Lua },
		"/^Makefile/": { image: Assets.Makefile },
		"/^mk\\.config$/": { image: Assets.Makefile },
		"/\\.setTrayTitle(mk|mak|make)$/i": { image: Assets.Makefile },
		"/^BSDmakefile$/i": { image: Assets.Makefile },
		"/^GNUmakefile$/i": { image: Assets.Makefile },
		"/^makefile\\.sco$/i": { image: Assets.Makefile },
		"/^Kbuild$/": { image: Assets.Makefile },
		"/^makefile$/": { image: Assets.Makefile },
		"/^mkfile$/i": { image: Assets.Makefile },
		"/^\\.?qmake$/i": { image: Assets.Makefile },
		"/\\.setTrayTitle(h|geo|topo)$/i": { image: Assets.Manifest },
		".cson": { image: Assets.Manifest },
		".json5": { image: Assets.Manifest },
		".ndjson": { image: Assets.Manifest },
		".fea": { image: Assets.Manifest },
		".json.eex": { image: Assets.Manifest },
		".proto": { image: Assets.Manifest },
		".pytb": { image: Assets.Manifest },
		".pydeps": { image: Assets.Manifest },
		"/\\.pot?$/i": { image: Assets.Manifest },
		".ejson": { image: Assets.Manifest },
		".edn": { image: Assets.Manifest },
		".eam.fs": { image: Assets.Manifest },
		".qml": { image: Assets.Manifest },
		".qbs": { image: Assets.Manifest },
		".ston": { image: Assets.Manifest },
		".ttl": { image: Assets.Manifest },
		".rviz": { image: Assets.Manifest },
		".syntax": { image: Assets.Manifest },
		".webmanifest": { image: Assets.Manifest },
		"/^pkginfo$/": { image: Assets.Manifest },
		"/^mime\\.types$/i": { image: Assets.Manifest },
		"/^METADATA\\.pb$/": { image: Assets.Manifest },
		"/[\\/\\\\](?:magic[\\/\\\\]Magdir|file[\\/\\\\]magic)[\\/\\\\][-.\\w]+$/i":
			{
				image: Assets.Manifest,
			},
		"/(\\\\|\\/)dev[-\\w]+\\1(?:[^\\\\\\/]+\\1)*(?!DESC|NOTES)(?:[A-Z][-A-Z]*)(?:\\.in)?$/":
			{
				image: Assets.Manifest,
			},
		"lib/icons/.icondb.js": { image: Assets.Manifest },
		"/\\.git[\\/\\\\](.*[\\/\\\\])?(HEAD|ORIG_HEAD|packed-refs|logs[\\/\\\\](.+[\\/\\\\])?[^\\/\\\\]+)$/":
			{
				image: Assets.Manifest,
			},
		"/\\.setTrayTitle(md|mdown|markdown|mkd|mkdown|mdwn|mkdn|rmd|ron|pmd)$/i": {
			image: Assets.Markdown,
		},
		".mdx": { image: Assets.Markdownx },
		".marko": { image: Assets.Marko },
		".nim": { image: Assets.Nim },
		".nims": { image: Assets.Nim },
		".nimble": { image: Assets.Nim },
		".nix": { image: Assets.Nim },
		"nodemon.json": { image: Assets.Nodemon },
		".npmrc": { image: Assets.Npm },
		"/\\.mm?$/i": { image: Assets.Objc },
		".pch": { image: Assets.Objc },
		".x": { image: Assets.Objc },
		".ml": { image: Assets.Ocaml },
		".mli": { image: Assets.Ocaml },
		".eliom": { image: Assets.Ocaml },
		".eliomi": { image: Assets.Ocaml },
		".ml4": { image: Assets.Ocaml },
		".mll": { image: Assets.Ocaml },
		".mly": { image: Assets.Ocaml },
		"/\\.pas(cal)?$/i": { image: Assets.Pascal },
		".lpr": { image: Assets.Pascal },
		".p": { image: Assets.Pawn },
		".inc": { image: Assets.Pawn },
		".sma": { image: Assets.Pawn },
		".pwn": { image: Assets.Pawn },
		".sp": { image: Assets.Pawn },
		"/\\.p(er)?l$/i": { image: Assets.Perl	 },
		".al": { image: Assets.Perl	 },
		".ph": { image: Assets.Perl	 },
		".plx": { image: Assets.Perl	 },
		".pm": { image: Assets.Perl	 },
		"/\\.setTrayTitle(psgi|xs)$/i": { image: Assets.Perl	 },
		".pl6": { image: Assets.Perl	 },
		"/\\.[tp]6$|\\.6pl$/i": { image: Assets.Perl	 },
		"/\\.setTrayTitle(pm6|p6m)$/i": { image: Assets.Perl	 },
		".6pm": { image: Assets.Perl	 },
		".nqp": { image: Assets.Perl	 },
		".p6l": { image: Assets.Perl	 },
		".pod6": { image: Assets.Perl	 },
		"/^Rexfile$/": { image: Assets.Perl	 },
		"/\\.php([st\\d]|_cs)?$/i": { image: Assets.Php },
		"/^Phakefile/": { image: Assets.Php },
		".pony": { image: Assets.Ponylang },
		".pcss": { image: Assets.Postcss },
		".ps1": { image: Assets.Powershell },
		".psd1": { image: Assets.Powershell },
		".psm1": { image: Assets.Powershell },
		".ps1xml": { image: Assets.Powershell },
		".prettierignore": { image: Assets.Prettier },
		"/\\.prettier((rc)|(\\.setTrayTitle(toml|yml|yaml|json|js))?$){2}/i": {
			image: Assets.Prettier,
		},
		"prettier.config.js": { image: Assets.Prettier },
		"prisma.yml": { image: Assets.Prisma },
		".pde": { image: Assets.Processing },
		".jade": { image: Assets.Pug },
		".pug": { image: Assets.Pug },
		".purs": { image: Assets.Purescript },
		".py": { image: Assets.Python },
		".ipy": { image: Assets.Python },
		".isolate": { image: Assets.Python },
		".pep": { image: Assets.Python },
		".gyp": { image: Assets.Python },
		".gypi": { image: Assets.Python },
		".pyde": { image: Assets.Python },
		".pyp": { image: Assets.Python },
		".pyt": { image: Assets.Python },
		".py3": { image: Assets.Python },
		".pyi": { image: Assets.Python },
		".pyw": { image: Assets.Python },
		".tac": { image: Assets.Python },
		".wsgi": { image: Assets.Python },
		".xpy": { image: Assets.Python },
		".rpy": { image: Assets.Python },
		"/\\.?(pypirc|pythonrc|python-venv)$/i": { image: Assets.Python },
		"/^(SConstruct|SConscript)$/": { image: Assets.Python },
		"/^(Snakefile|WATCHLISTS)$/": { image: Assets.Python },
		"/^wscript$/": { image: Assets.Python },
		"/\\.setTrayTitle(r|Rprofile|rsx|rd)$/i": { image: Assets.R },
		".re": { image: Assets.Reasonml },
		"/\\.setTrayTitle(rb|ru|ruby|erb|gemspec|god|mspec|pluginspec|podspec|rabl|rake|opal)$/i":
			{
				image: Assets.Ruby,
			},
		"/^\\.?(irbrc|gemrc|pryrc|ruby-(gemset|version))$/i": { image: Assets.Ruby },
		"/^(Appraisals|(Rake|[bB]uild|Cap|Danger|Deliver|Fast|Guard|Jar|Maven|Pod|Puppet|Snap)file(\\.lock)?)$/":
			{
				image: Assets.Ruby,
			},
		"/\\.setTrayTitle(jbuilder|rbuild|rb[wx]|builder)$/i": { image: Assets.Ruby },
		"/^rails$/": { image: Assets.Ruby },
		".watchr": { image: Assets.Ruby },
		".rs": { image: Assets.Rust },
		"/\\.setTrayTitle(sc|scala)$/i": { image: Assets.Scala },
		".scss": { image: Assets.Scss },
		".sass": { image: Assets.Scss },
		"/\\.setTrayTitle(sh|rc|bats|bash|tool|install|command)$/i": {
			image: Assets.Shell,
		},
		"/^(\\.?bash(rc|[-_]?(profile|login|logout|history|prompt))|_osc|config|install-sh|PKGBUILD)$/i":
			{
				image: Assets.Shell,
			},
		"/\\.setTrayTitle(ksh|mksh|pdksh)$/i": { image: Assets.Shell },
		".sh-session": { image: Assets.Shell },
		"/\\.zsh(-theme|_history)?$|^\\.?(antigen|zpreztorc|zlogin|zlogout|zprofile|zshenv|zshrc)$/i":
			{
				image: Assets.Shell,
			},
		"/\\.fish$|^\\.fishrc$/i": { image: Assets.Shell },
		"/^\\.?(login|profile)$/": { image: Assets.Shell },
		".inputrc": { image: Assets.Shell },
		".tmux": { image: Assets.Shell },
		"/^(configure|config\\.setTrayTitle(guess|rpath|status|sub)|depcomp|libtool|compile)$/":
			{
				image:	Assets.Shell,
			},
		"/^\\/(private\\/)?etc\\/([^\\/]+\\/)*(profile$|nanorc$|rc\\.|csh\\.)/i": {
			image: Assets.Shell,
		},
		"/^\\.?cshrc$/i": { image: Assets.Shell },
		".profile": { image: Assets.Shell },
		".tcsh": { image: Assets.Shell },
		".csh": { image: Assets.Shell },
		".sqf": { image: Assets.Sql},
		"/\\.setTrayTitle(my)?sql$/i": { image: Assets.Sql},
		".ddl": { image: Assets.Sql},
		".udf": { image: Assets.Sql},
		".hql": { image: Assets.Sql},
		".viw": { image: Assets.Sql},
		".prc": { image: Assets.Sql},
		".cql": { image: Assets.Sql},
		".db2": { image: Assets.Sql},
		"/\\.setTrayTitle(styl|stylus)$/i": { image: Assets.Stylus},
		".svelte": { image: Assets.Svelte },
		".svg": { image: Assets.Svg },
		".swift": { image: Assets.Swift },
		".tex": { image: Assets.Tex },
		".ltx": { image: Assets.Tex },
		".aux": { image: Assets.Tex },
		".sty": { image: Assets.Tex },
		".dtx": { image: Assets.Tex },
		".cls": { image: Assets.Tex },
		".ins": { image: Assets.Tex },
		".lbx": { image: Assets.Tex },
		".mkiv": { image: Assets.Tex },
		".mkvi": { image: Assets.Tex },
		".mkii": { image: Assets.Tex },
		".texi": { image: Assets.Tex },
		"/^hyphen(ex)?\\.setTrayTitle(cs|den|det|fr|sv|us)$/": { image: Assets.Tex },
		"/\\.te?xt$/i": { image: Assets.Text },
		".rtf": { image: Assets.Text },
		"/\\.i?nfo$/i": { image: Assets.Text },
		".msg": { image: Assets.Text },
		"/\\.setTrayTitle(utxt|utf8)$/i": { image: Assets.Text },
		".toml": { image: Assets.Toml },
		".travis.yml": { image: Assets.Travis },
		".ts": { image: Assets.Ts },
		".tsx": { image: Assets.Tsx },
		".twig": { image: Assets.Twig },
		".v": { image: Assets.V },
		".vh": { image: Assets.V },
		".vala": { image: Assets.Vala },
		".vapi": { image: Assets.Vala },
		".vb": { image: Assets.Vb },
		".vbs": { image: Assets.Vb },
		".vbhtml": { image: Assets.Vb },
		".vbproj": { image: Assets.Vb },
		".vba": { image: Assets.Vb },
		".vcxproj": { image: Assets.Vcxproj },
		".vscodeignore": { image: Assets.Vscodeignore },
		".vue": { image:  Assets.Vue },
		".wat": { image: Assets.Wasm },
		".wast": { image: Assets.Wasm },
		".wasm": { image: Assets.Wasm },
		"/webpack(\\.dev|\\.development|\\.prod|\\.production)?\\.config(\\.babel)?\\.setTrayTitle(js|jsx|coffee|ts|json|json5|yaml|yml)/i":
			{
				image: Assets.Webpack,
			},
		".xml": { image: Assets.Xml },
		"/\\.ya?ml$/i": { image: Assets.Yaml },
		"/^yarn(\\.lock)?$/i": { image: Assets.Yarn },
		".yarnrc": { image: Assets.Yarn },
		".zig": { image: Assets.Zig },

		".json": { image: Assets.Json },
		".js": { image: Assets.Js },
		".css": { image: Assets.Css },
	};

let lastFileChange: number = null,
	lastFile: string = null;

presence.on("UpdateData", async () => {
	const presenceData: PresenceData = {
			smallImageKey: Assets.Logo,
			smallImageText: "GitHub Codespaces",
		},
		activeTab = document.querySelector(".tab.active"),
		editorMode = document.querySelector("#status.editor.mode");

	// Preparing Screen
	if (document.querySelector(".vscs-splash-screen-steps-pane")) {
		presenceData.largeImageKey = Assets.Ghlg;
		presenceData.details = "Preparing a codespace...";
		delete presenceData.smallImageKey;

		if (document.querySelector(".vso-splash-screen__button"))
			presenceData.details = "Inactive Codespace";
		// Idle/Start Screen
	} else if (activeTab && editorMode) {
		const scmTab = Array.from(document.querySelectorAll("#status\\.scm"))
				.reverse()
				.find(scmTab => scmTab && scmTab.hasAttribute("aria-label")),
			workspace = scmTab
				? scmTab.getAttribute("aria-label").split("(Git)")[0]
				: null,
			filename = activeTab.getAttribute("data-resource-name"),
			filepath = activeTab.getAttribute("title"),
			syntaxMode = editorMode.getAttribute("aria-label").toLowerCase(),
			largeImageKey =
				knownExtensions[
					Object.keys(knownExtensions).find(key => {
						if (filename.endsWith(key)) return true;
						const match = /^\/(.*)\/([mgiy]+)$/.exec(key);
						if (!match) return false;
						return new RegExp(match[1], match[2]).test(filename);
					})
				] ?? (syntaxMode in langMap ? langMap[syntaxMode] : null);

		if (lastFile !== filepath) {
			lastFile = filepath;
			lastFileChange = Date.now();
		}

		presenceData.startTimestamp = lastFileChange;
		presenceData.largeImageKey = largeImageKey ? largeImageKey.image : Assets.Txt;
		presenceData.details = (await presence.getSetting<string>("details"))
			.replaceAll("%file%", filename)
			.replaceAll("%path%", filepath)
			.replaceAll("%folder%", filepath.split("/").reverse()[1])
			.replaceAll(
				"%ext%",
				(largeImageKey ? largeImageKey.image : Assets.Txt).toUpperCase()
			)
			.replaceAll("%workspace%", workspace || "N/A")
			.replaceAll(
				"%workspaceOrFolder%",
				workspace || filepath.split("/").reverse()[1]
			);
		presenceData.state = (await presence.getSetting<string>("state"))
			.replaceAll("%file%", filename)
			.replaceAll("%path%", filepath)
			.replaceAll("%folder%", filepath.split("/").reverse()[1])
			.replaceAll(
				"%ext%",
				(largeImageKey ? largeImageKey.image : Assets.Txt).toUpperCase()
			)
			.replaceAll("%workspace%", workspace || "N/A")
			.replaceAll(
				"%workspaceOrFolder%",
				workspace || filepath.split("/").reverse()[1]
			);
	} else if (!editorMode) {
		presenceData.largeImageKey = Assets.Idle;
		presenceData.details = "Idling";
	}

	if (!presenceData.largeImageKey) presence.setActivity();
	else presence.setActivity(presenceData);
});
