var presence = new Presence({ clientId: "705189441484095508" });
var ssong, slisteners, spresenter;
async function newStats() {
    var data = await window
        .fetch("https://radio.complexr.pw/api/nowplaying/1")
        .then((res) => res.json());
    ssong = data.now_playing.song.text;
    spresenter = data.live.is_live
        ? "Presenter " + data.live.streamer_name
        : "AutoDJ";
    slisteners = data.listeners.unique + " Listeners";
}
setInterval(newStats, 2500);
newStats();
presence.on("UpdateData", async () => {
    var stamp = Math.floor(Date.now());
    const info = {
        largeImageKey: "complexlogo",
        details: `${spresenter} â€¢ ${slisteners || "Loading statistics"}`,
        state: `${ssong || "Loading song"}`,
        startTimestamp: stamp
    };
    presence.setActivity(info);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2VuY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9wcmVzZW5jZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLFFBQVEsR0FBRyxJQUFJLFFBQVEsQ0FBQyxFQUFFLFFBQVEsRUFBRSxvQkFBb0IsRUFBRSxDQUFDLENBQUM7QUFFaEUsSUFBSSxLQUFLLEVBQUUsVUFBVSxFQUFFLFVBQVUsQ0FBQztBQUVsQyxLQUFLLFVBQVUsUUFBUTtJQUNyQixJQUFJLElBQUksR0FBRyxNQUFNLE1BQU07U0FDcEIsS0FBSyxDQUFDLDRDQUE0QyxDQUFDO1NBQ25ELElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7SUFDN0IsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNuQyxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO1FBQzVCLENBQUMsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhO1FBQ3hDLENBQUMsQ0FBQyxRQUFRLENBQUM7SUFDYixVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsWUFBWSxDQUFDO0FBQ3BELENBQUM7QUFFRCxXQUFXLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzVCLFFBQVEsRUFBRSxDQUFDO0FBRVgsUUFBUSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsS0FBSyxJQUFJLEVBQUU7SUFDbkMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNuQyxNQUFNLElBQUksR0FBaUI7UUFDekIsYUFBYSxFQUFFLGFBQWE7UUFDNUIsT0FBTyxFQUFFLEdBQUcsVUFBVSxNQUFNLFVBQVUsSUFBSSxvQkFBb0IsRUFBRTtRQUNoRSxLQUFLLEVBQUUsR0FBRyxLQUFLLElBQUksY0FBYyxFQUFFO1FBQ25DLGNBQWMsRUFBRSxLQUFLO0tBQ3RCLENBQUM7SUFDRixRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzdCLENBQUMsQ0FBQyxDQUFDIn0=